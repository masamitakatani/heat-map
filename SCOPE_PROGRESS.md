# ヒートマップ & ファネル解析ツール - プロジェクト進捗管理

## プロジェクト概要

**プロジェクト名**: ヒートマップ & ファネル解析ツール
**開始日**: 2025-11-01
**現在のフェーズ**: Phase 1（要件定義）完了
**最終更新日**: 2025-11-05

---

## Phase進捗

| Phase | 内容 | ステータス | 開始日 | 完了日 |
|-------|------|-----------|--------|--------|
| Phase 1 | 要件定義・ヒアリング | ✅ 完了 | 2025-11-01 | 2025-11-05 |
| Phase 2 | 技術選定 | ⬜ 未着手 | - | - |
| Phase 3 | フロントエンド基盤構築 | ⬜ 未着手 | - | - |
| Phase 4 | ページ実装 | ⬜ 未着手 | - | - |
| Phase 5 | API統合 | ⬜ 未着手 | - | - |
| Phase 6 | E2Eテスト | ⬜ 未着手 | - | - |
| Phase 7 | デプロイ準備 | ⬜ 未着手 | - | - |

---

## 統合ページ管理表

このプロジェクトはJavaScriptライブラリとして提供され、LP上で直接可視化を行うため、管理画面は存在しません。
以下は、ライブラリが提供する主要機能コンポーネントのリストです。

| ID | コンポーネント名 | 機能概要 | 統合機能 | 優先度 | 着手 | 完了 |
|----|----------------|---------|---------|--------|------|------|
| C-001 | ヒートマップオーバーレイUI | オーバーレイ表示制御 | ON/OFF切り替え、ドラッグ移動、位置保存 | 高 | [ ] | [ ] |
| C-002 | クリックヒートマップ | クリック位置可視化 | クリック記録、頻度計算、色グラデーション表示 | 高 | [ ] | [ ] |
| C-003 | スクロールヒートマップ | スクロール深度可視化 | スクロール記録、到達率計算、離脱ポイント表示 | 高 | [ ] | [ ] |
| C-004 | マウスムーブメントヒートマップ | マウス軌跡可視化 | マウス移動記録、注目エリア検出、ホバー時間計算 | 中 | [ ] | [ ] |
| C-005 | ファネル解析ダッシュボード | ファネル分析表示 | 遷移率計算、離脱率表示、ボトルネック特定 | 高 | [ ] | [ ] |
| C-006 | データ管理機能 | LocalStorageデータ管理 | データ保存、取得、削除、容量監視、自動クリーンアップ | 高 | [ ] | [ ] |
| C-007 | 表示モード切り替え | ヒートマップ種別切り替え | クリック/スクロール/マウスムーブ/ファネルの切り替え | 中 | [ ] | [ ] |
| C-008 | データリセット機能 | データ手動削除 | 確認ダイアログ、全データクリア | 低 | [ ] | [ ] |
| C-009 | コネクティッドワン連携 | 外部API連携 | ファネル情報取得、Webhook送信 | 高 | [ ] | [ ] |
| C-010 | レスポンシブ対応 | 各デバイス対応 | PC/タブレット/スマホ表示最適化 | 高 | [ ] | [ ] |

---

## 主要機能の詳細

### C-001: ヒートマップオーバーレイUI
- **目的**: ヒートマップを表示/非表示するための制御UI
- **配置**: 画面右下（初期位置）
- **機能**:
  - ドラッグ&ドロップで移動可能
  - 移動位置をLocalStorageに保存
  - ON/OFF切り替えボタン
  - 表示モード切り替えボタン

### C-002: クリックヒートマップ
- **目的**: ユーザーのクリック位置を可視化
- **機能**:
  - クリック座標の記録
  - クリック頻度の計算
  - 色グラデーション表示（赤=高頻度、青=低頻度）
  - クリック可能要素のクリック率表示

### C-003: スクロールヒートマップ
- **目的**: ページのスクロール深度を可視化
- **機能**:
  - スクロール深度の記録
  - 平均到達率の計算
  - 離脱ポイントの特定
  - パーセンテージ表示

### C-004: マウスムーブメントヒートマップ
- **目的**: マウスカーソルの移動軌跡を可視化
- **機能**:
  - マウス移動軌跡の記録
  - ホバー時間の計測
  - 注目エリアの強調表示
  - サンプリング（パフォーマンス対策）

### C-005: ファネル解析ダッシュボード
- **目的**: マルチステップファネルの分析結果を表示
- **機能**:
  - ステップ間遷移率の計算
  - 各ステップの離脱率表示
  - ボトルネックページの特定
  - クロスドメイン対応

### C-006: データ管理機能
- **目的**: LocalStorageのデータを安全に管理
- **機能**:
  - データの保存・取得・削除
  - 容量監視（5MB制限）
  - 容量超過時の自動削除（FIFO方式）
  - 警告表示

### C-007: 表示モード切り替え
- **目的**: 異なる種類のヒートマップを切り替え
- **機能**:
  - クリックヒートマップ表示
  - スクロールヒートマップ表示
  - マウスムーブメント表示
  - ファネル解析ダッシュボード表示

### C-008: データリセット機能
- **目的**: 記録したデータを手動でクリア
- **機能**:
  - 確認ダイアログ表示（誤操作防止）
  - LocalStorageの全データ削除
  - リセット後のUI更新

### C-009: コネクティッドワン連携
- **目的**: コネクティッドワンとシームレスに連携
- **機能**:
  - APIキー認証
  - ファネル情報の取得
  - ユーザー行動データのWebhook送信
  - エラーハンドリング

### C-010: レスポンシブ対応
- **目的**: 全デバイスで快適に動作
- **対応デバイス**:
  - デスクトップ（1024px〜）
  - タブレット（768px〜1023px）
  - スマートフォン（320px〜767px）

---

## 技術スタック

### フロントエンド
- **言語**: TypeScript
- **フレームワーク**: React 18
- **UIライブラリ**: カスタムUI（レスポンシブ対応）
- **ビルドツール**: Vite
- **バンドル最適化**: gzip圧縮（目標50KB以下）

### バックエンド
- **タイプ**: サーバーレス（完全クライアントサイド）
- **データ保存**: LocalStorageのみ（5MB制限）
- **外部連携**: コネクティッドワンAPI + Webhook

### ホスティング
- **推奨**: Netlify または Vercel（無料枠）
- **配信**: CDN経由

---

## 外部サービス・アカウント

| サービス名 | 用途 | 必須/任意 | 備考 |
|-----------|------|----------|------|
| コネクティッドワン | ファネル情報取得、Webhook送信 | 必須 | APIキー必要 |
| Netlify/Vercel | 静的ホスティング | 必須 | 無料枠で十分 |

---

## 成功指標（KPI）

### 技術的指標
- ✅ スクリプトサイズ: 50KB以下（gzip圧縮後）
- ✅ ページ読み込み影響: 100ms以内
- ✅ エラー発生率: 1%以下
- ✅ LocalStorage使用量: 3MB以下（5MBの60%）

### ユーザー体験指標
- ✅ 導入の簡単さ: コピー&ペーストのみで完了
- ✅ ヒートマップ表示速度: 1秒以内
- ✅ データ記録の正確性: 99%以上
- ✅ オーバーレイUIの応答速度: 100ms以内

---

## MVP（最小機能セット）

Phase 1リリースに含む必須機能:
- [x] クリックヒートマップ
- [x] スクロールヒートマップ
- [x] マウスムーブメントヒートマップ
- [x] ファネル解析
- [x] コネクティッドワン連携
- [x] オーバーレイUI（ドラッグ移動可能）
- [x] レスポンシブデザイン（PC/タブレット/スマホ対応）

---

## 制約事項

### 技術的制約
- サーバーレス構成必須（維持費ゼロ設計）
- LocalStorageのみ使用（5MB制限）
- バックエンドDB完全不使用
- クロスドメイン通信のCORS対応必須

### パフォーマンス制約
- ページ読み込み影響100ms以内
- スクリプトサイズ50KB以下（gzip圧縮後）
- 非同期処理でユーザー操作をブロックしない

---

## 次のステップ

### Phase 2（技術選定）で実施すること
- [ ] 最適なヒートマップ可視化ライブラリの選定
- [ ] LocalStorage管理ライブラリの選定
- [ ] データ圧縮ライブラリの選定（LZ-String等）
- [ ] ビルド最適化設定の決定

### Phase 3（フロントエンド基盤構築）で実施すること
- [ ] プロジェクト環境構築（Vite + React + TypeScript）
- [ ] ディレクトリ構造の決定
- [ ] ビルド設定（バンドルサイズ最適化）
- [ ] LocalStorage管理モジュールの実装

---

## 変更履歴

| 日付 | バージョン | 変更内容 | 担当者 |
|------|-----------|---------|--------|
| 2025-11-05 | 1.0 | SCOPE_PROGRESS.md初版作成 | gambit ai gen |

---

**最終更新**: 2025-11-05
**管理者**: gambit ai gen
